<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>pearls-of-introspection</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" />
</head>
<body>
<div id="preamble" class="status">
  <h4>
    <a href="https://benjamin-asdf.github.io/faster-than-light-memes/"
       style="background-color:black;;text-decoration:none;padding:0.3rem">
      <span style="color:#feb48f">:faster-than-light</span>
      <span style="color:#F689FF">/memes</span>
    </a>
  </h4>
</div>
<div id="content" class="content">
<h1 class="title">pearls-of-introspection</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org501b63d">The describes</a>
<ul>
<li><a href="#org9a22adb">describe-mode</a></li>
<li><a href="#orgef22eed">describe-char</a></li>
<li><a href="#org1012ff7">describe-key</a></li>
<li><a href="#org1283177">describe-function</a></li>
<li><a href="#orgd7321cd">describe-keymap</a></li>
<li><a href="#orgbb5e3d5">prefix-help-command</a>
<ul>
<li><a href="#orgfbf9153">embark-bindings</a></li>
</ul>
</li>
<li><a href="#orgcd5e636">M-x <code>describe-</code></a></li>
</ul>
</li>
<li><a href="#org2a7ba20">view-lossage</a></li>
<li><a href="#orge3cf29f">apropos-value</a></li>
<li><a href="#org8b8491f">find-library</a></li>
<li><a href="#org997ba1f">where-is</a></li>
</ul>
</div>
</div>
<p>
Recently, I watched <a href="https://www.youtube.com/watch?v=6M1JesjbtDM">BugsWriter falling in love with elisp</a> <sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup> - he said
about <code>describe-mode</code>
</p>

<blockquote>
<p>
Why did nobody ever tell me about this?
</p>
</blockquote>

<p>
This post is called Pearls of introspection.
</p>

<blockquote>
<p>
All of Emacs is one bright pearl.
</p>
</blockquote>

<div id="outline-container-org501b63d" class="outline-2">
<h2 id="org501b63d">The describes</h2>
<div class="outline-text-2" id="text-org501b63d">
</div>
<div id="outline-container-org9a22adb" class="outline-3">
<h3 id="org9a22adb">describe-mode</h3>
<div class="outline-text-3" id="text-org9a22adb">
<p>
Lists all current keybinds in a buffer. Huge output, sometimes what
you want.
</p>
</div>
</div>

<div id="outline-container-orgef22eed" class="outline-3">
<h3 id="orgef22eed">describe-char</h3>
<div class="outline-text-3" id="text-orgef22eed">
<p>
Emacs is a text editor, text is made up of chars.
<code>describe-char</code>  is useful if you want to know what face is rendering.
It goes beyond that by showing string properties, overlays,
and buttons. This can be useful for debugging.
</p>

<p>
Story:
Once I deleted some packages on my system, then I go into emacs <code>info</code>
and some of the text is not rendered right.
</p>

<p>
<code>describe-char</code> gave me the hint, the <code>fixed-pitch</code> face wanted
"Monospace Serif" or some such but I only had Monospace.
</p>

<p>
So I did this and was happy ever after:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(set-face-attribute 'fixed-pitch nil  <span style="font-weight: bold;">:family</span> <span style="font-style: italic;">"Monospace"</span>)
(set-face-attribute 'fixed-pitch-serif nil  <span style="font-weight: bold;">:family</span> <span style="font-style: italic;">"Monospace"</span>)
</pre>
</div>

<p>
Worth binding:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(define-key help-map (kbd <span style="font-style: italic;">"c"</span>) #'describe-char)
</pre>
</div>
</div>
</div>


<div id="outline-container-org1012ff7" class="outline-3">
<h3 id="org1012ff7">describe-key</h3>
<div class="outline-text-3" id="text-org1012ff7">
<p>
"What does this key do?" - the answer is <code>describe-key</code> and hit the
key.
</p>
</div>
</div>

<div id="outline-container-org1283177" class="outline-3">
<h3 id="org1283177">describe-function</h3>
<div class="outline-text-3" id="text-org1283177">
<p>
Emacs functions have amazing docstrings.
</p>

<p>
The help buffer has a keymap of its own, try <code>?</code> to list keybinds.
</p>

<p>
Highlight: <code>s</code> to go to source.
</p>
</div>
</div>

<div id="outline-container-orgd7321cd" class="outline-3">
<h3 id="orgd7321cd">describe-keymap</h3>
<div class="outline-text-3" id="text-orgd7321cd">
<p>
Probably faster than describe-mode, renders a keymap in a help buffer.
Try <code>describe-keymap</code> -&gt; <code>help-map</code> hehe.
</p>
</div>
</div>

<div id="outline-container-orgbb5e3d5" class="outline-3">
<h3 id="orgbb5e3d5">prefix-help-command</h3>
<div class="outline-text-3" id="text-orgbb5e3d5">
<p>
You type <code>?</code> after starting to type a prefix, then you get the binds.
</p>
</div>

<div id="outline-container-orgfbf9153" class="outline-4">
<h4 id="orgfbf9153">embark-bindings</h4>
<div class="outline-text-4" id="text-orgfbf9153">
<p>
An alternative to the default <code>?</code>, it is amazing. I get a vertico
 completing-read of the binds.
</p>
</div>
</div>
</div>

<div id="outline-container-orgcd5e636" class="outline-3">
<h3 id="orgcd5e636">M-x <code>describe-</code></h3>
<div class="outline-text-3" id="text-orgcd5e636">
<p>
There are more, some of them I never used. Emacs is vast like the ocean.
</p>
</div>
</div>
</div>

<div id="outline-container-org2a7ba20" class="outline-2">
<h2 id="org2a7ba20">view-lossage</h2>
<div class="outline-text-2" id="text-org2a7ba20">
<p>
You accidentally hit some key, and something unexpected happens.
<code>view-lossage</code> is your friend. It shows the last keys + commands.
</p>

<p>
It is like the morning-after pill version of <code>describe-key</code>.
</p>

<p>
story:
I sometimes accidentally hit <code>y</code> before typing the text for
an <code>avy</code> command.
</p>

<p>
Every time I was like "Holy cow whatever I hit there is powerful". <sup><a id="fnr.2" class="footref" href="#fn.2" role="doc-backlink">2</a></sup>
</p>

<p>
I didn't know about <code>view-lossage</code>. The thing is, it would not have
helped, because <code>avy</code> is reading the key, then dispatching on the key.
I guess it needs to go through the keymap system or something to show
up in <code>view-lossage</code>.
</p>
</div>
</div>

<div id="outline-container-orge3cf29f" class="outline-2">
<h2 id="orge3cf29f">apropos-value</h2>
<div class="outline-text-2" id="text-orge3cf29f">
<p>
This helps me about once per year.
</p>

<p>
It is extremely satisfying when you use this and it helps you.
I once figured out about <code>revert-buffer-function</code> by using it.
</p>

<p>
You can revert <code>shell-command</code> buffers to rerun the command but I did
not know by which principle.
</p>

<p>
<code>apropos-value</code>, then typing my shell command showed me there was a
buffer-local
variable called <code>revert-buffer-function</code>. It worked because
Elisp closure objects print with their environment. In other words, the
value of <code>revert-buffer-function</code> was a lambda that printed with my
shell command. It is quite wild.
</p>
</div>
</div>

<div id="outline-container-org8b8491f" class="outline-2">
<h2 id="org8b8491f">find-library</h2>
<div class="outline-text-2" id="text-org8b8491f">
<p>
Read code, and do little experiments. I am not sure but I think there
might be something profound about Elisp and emacs.
I think the language is the program and the program is the language or
something. Knowing the program is to know the language and knowing the
language is to know the program.
(Insert link to top Elisp functions blog post here).
</p>
</div>
</div>

<div id="outline-container-org997ba1f" class="outline-2">
<h2 id="org997ba1f">where-is</h2>
<div class="outline-text-2" id="text-org997ba1f">
<p>
I just discovered this via <code>describe-keymap</code> into <code>help-map</code> lol.
This is like <code>describe-key</code> but you say the command and it says the
keybinding.
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><blockquote>
<p>
I thought lisp was going to be complicated but it is simple.
</p>
</blockquote>
<p class="footpara">
That is an interesting tension between outside perception and the
actual language.
Since you write the AST directly, you can say what you mean.
The power of lisp is that the code is made of
</p>
<ol class="org-ol">
<li>Ideas</li>
<li>There is nothing else.</li>
</ol></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
It makes the cursor stay and yank the target word.
Hit <code>?</code> before typing the keys for avy.
The way it works is that avy can dispatch with different actions, the
default is to jump to the location, but <code>y</code> for example yanks a word
and makes your cursor stay where you are. It is really powerful.
Ace-window has the same paradigm.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="date">Date: 2022-11-12 Sat 16:02</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.2 (<a href="https://orgmode.org">Org</a> mode 9.5.5)</p>
</div>
</body>
</html>
